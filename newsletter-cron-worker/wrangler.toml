name = "theluggies-newsletter-cron"
main = "src/index.js"
compatibility_date = "2024-09-01"
compatibility_flags = ["nodejs_compat"]

# Environment Variables (set in Cloudflare Dashboard):
# - PAGES_URL: The URL of your Pages project (e.g., https://theluggies.com)
# - CRON_SECRET: Secret for authenticating with the Pages API

# Cron triggers for automatic newsletter sending
# Runs every day at 09:30 and 15:05 Stockholm time (with 5-min backup checks)
# Checks for new YouTube videos and sends newsletters automatically
[triggers]
crons = [
  "30 8 * * *",   # Daily 09:30 Stockholm time (08:30 UTC in winter)
  "35 8 * * *",   # Daily 09:35 backup check
  "5 14 * * *",   # Daily 15:05 Stockholm time (14:05 UTC in winter)
  "10 14 * * *"   # Daily 15:10 backup
]
